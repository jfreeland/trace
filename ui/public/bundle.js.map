{"version":3,"file":"bundle.js","sources":["../src/main.js"],"sourcesContent":["// import * as d3 from \"d3\";\n\nconst width = $(document).width() - 100;\nconst height = $(document).height() - 100;\nconst margin = { top: 10, right: 30, bottom: 10, left: 30 };\nconst simulationDurationMs = 1250; // 1.25 second\nvar startTime, endTime;\n\nvar simulation = d3\n  .forceSimulation()\n  .force(\"charge\", d3.forceManyBody().strength(-800))\n  .force(\n    \"link\",\n    d3.forceLink().id((d) => d.id)\n  )\n  .force(\"y\", d3.forceY())\n  .alphaTarget(1)\n  .alphaDecay(0.001)\n  .on(\"tick\", ticked);\n\nconst svg = d3\n  .select(\"div\")\n  .append(\"svg\")\n  .attr(\"viewBox\", [-width / 2, -height / 2, width, height])\n  .attr(\"height\", height + margin.top + margin.bottom)\n  .attr(\"width\", width + margin.left + margin.right);\n\nsvg.append(\"g\").attr(\"class\", \"links\");\nsvg.append(\"g\").attr(\"class\", \"nodes\");\n\nfunction draw(data) {\n  var nodeElements = svg\n    .select(\".nodes\")\n    .selectAll(\".node\")\n    .data(data.nodes, (d) => d.id);\n\n  var enterSelection = nodeElements.enter().append(\"g\").attr(\"class\", \"node\");\n\n  var circles = enterSelection\n    .append(\"circle\")\n    .attr(\"r\", 20)\n    .style(\"fill\", \"#69b3a2\")\n    .merge(enterSelection);\n\n  var labels = enterSelection\n    .append(\"text\")\n    .text((d) => d.id)\n    .attr(\"x\", 10)\n    .attr(\"y\", 10)\n    .merge(enterSelection);\n\n  nodeElements.exit().transition().duration(\"2000\").remove();\n\n  var linkElements = svg.select(\".links\").selectAll(\".link\").data(data.links);\n  linkElements.enter().append(\"line\").attr(\"class\", \"link\").merge(linkElements);\n  linkElements.exit().remove();\n\n  startTime = Date.now();\n  endTime = startTime + simulationDurationMs;\n  simulation.nodes(data.nodes);\n  simulation.force(\"link\").links(data.links);\n  simulation.alphaTarget(1).restart();\n}\n\nfunction ticked() {\n  if (Date.now() < endTime) {\n    var nodeElements = svg.select(\".nodes\").selectAll(\".node\");\n    var linkElements = svg.select(\".links\").selectAll(\".link\");\n\n    nodeElements\n      .attr(\"transform\", function (d) {\n        return \"translate(\" + d.x + \",\" + d.y + \")\";\n      })\n      .call(\n        d3\n          .drag()\n          .on(\"start\", dragstarted)\n          .on(\"drag\", dragged)\n          .on(\"end\", dragended)\n      );\n\n    linkElements\n      .attr(\"x1\", (d) => d.source.x)\n      .attr(\"y1\", (d) => d.source.y)\n      .attr(\"x2\", (d) => d.target.x)\n      .attr(\"y2\", (d) => d.target.y);\n  } else {\n    simulation.stop();\n  }\n}\n\nfunction dragstarted(event, d) {\n  if (!event.active) simulation.alphaTarget(0.3).restart();\n  d.fx = d.x;\n  d.fy = d.y;\n}\n\nfunction dragged(event, d) {\n  d.fx = event.x;\n  d.fy = event.y;\n}\n\nfunction dragended(event, d) {\n  if (!event.active) simulation.alphaTarget(0);\n  d.fx = null;\n  d.fy = null;\n}\n\nd3.json(\"files/first.json\").then((data) => {\n  draw(data);\n});\n\n// setTimeout(function () {\n//     d3.json('files/second.json')\n//         .then(data => {\n//             draw(data);\n//         });\n// }, 3000);\n\n// setTimeout(function () {\n//     d3.json('files/third.json')\n//         .then(data => {\n//             draw(data);\n//         });\n// }, 6000);\n\ndocument.getElementById(\"btn1\").addEventListener(\"click\", function () {\n  d3.json(\"files/first.json\").then((data) => {\n    draw(data);\n  });\n});\n\ndocument.getElementById(\"btn2\").addEventListener(\"click\", function () {\n  d3.json(\"files/second.json\").then((data) => {\n    draw(data);\n  });\n});\n\ndocument.getElementById(\"btn3\").addEventListener(\"click\", function () {\n  d3.json(\"files/third.json\").then((data) => {\n    draw(data);\n  });\n});\n"],"names":["width","$","document","height","margin","startTime","endTime","simulation","d3","forceSimulation","force","forceManyBody","strength","forceLink","id","d","forceY","alphaTarget","alphaDecay","on","Date","now","nodeElements","svg","select","selectAll","linkElements","attr","x","y","call","drag","dragstarted","dragged","dragended","source","target","stop","append","draw","data","nodes","enterSelection","enter","style","merge","text","exit","transition","duration","remove","links","restart","event","active","fx","fy","json","then","getElementById","addEventListener"],"mappings":"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"}